<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hello Kitty Greek Speaking Practice</title>
  <style>
    :root{
      --bg:#ffe6f0; --card:#fff0f6; --ink:#5c004d; --accent:#ff66a3; --accent-2:#ff99cc; --muted:#b34780;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:'Comic Sans MS', cursive, sans-serif; background:linear-gradient(180deg, var(--bg), #fff 70%); color:var(--ink);}
    header{background:var(--accent); padding:16px; text-align:center; color:white; position:sticky; top:0;}
    header h1{margin:0; font-size:26px;}
    nav{margin-top:8px;}
    nav button{margin:0 6px; padding:8px 14px; border:none; border-radius:20px; background:var(--accent-2); color:var(--ink); font-weight:bold; cursor:pointer;}
    nav button.active{background:white; border:2px solid var(--accent);}
    .wrap{padding:20px;}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:12px}
    .card{background:var(--card); border-radius:16px; padding:14px; text-align:center; box-shadow:0 4px 10px rgba(0,0,0,.1);}
    .gr{font-size:20px; font-weight:bold;}
    .tr{font-size:14px; color:var(--muted);}
    .en{font-size:15px; margin-top:4px;}
    .hidden{display:none}
    button.game{background:var(--accent); color:white; border:none; border-radius:14px; padding:8px 12px; cursor:pointer; margin:4px;}
    .score{font-weight:bold; color:var(--ink); margin-top:6px; display:block;}
    /* Always-visible Hello Kitty sticker */
    .hk-sticker{position:fixed; right:12px; top:12px; height:80px; z-index:9999; pointer-events:none; filter: drop-shadow(0 2px 4px rgba(0,0,0,.2));}
    @media (max-width:600px){ .hk-sticker{height:60px; right:8px; top:8px;} }
  </style>
</head>
<body>
  <header>
    <h1>üéÄ Hello Kitty Greek ‚Äî Speak & Games</h1>
    <img src=\"https://static.wikia.nocookie.net/hellokitty/images/5/52/Sanrio_Characters_Hello_Kitty_Image026.png/revision/latest?cb=20250110105831\" alt=\"Hello Kitty\" style=\"max-height:80px; display:block; margin:10px auto;\">
    <nav>
      <button onclick="showPage('words')" class="active">Words</button>
      <button onclick="showPage('flashcards')">Flashcards</button>
      <button onclick="showPage('quiz')">Quiz</button>
      <button onclick="showPage('timed')">‚è±Ô∏è Timed Challenge</button>
    </nav>
  </header>

  <main class="wrap">
    <!-- Words Page -->
    <section id="words">
      <h2>Word List</h2>
      <label><input type="checkbox" id="toggleTr" checked> Show pronunciation (English letters)</label>
      <div class="grid" id="wordGrid"></div>
    </section>

    <!-- Flashcards Page -->
    <section id="flashcards" class="hidden">
      <h2>Flashcards</h2>
      <div id="flashArea"></div>
      <button class="game" onclick="nextFlash()">Next ‚û°Ô∏è</button>
    </section>

    <!-- Say It Page -->
    <section id="say" class="hidden">
      <h2>Say the Word üé§</h2>
      <div id="sayArea"></div>
      <p><small>(This uses your microphone to practice speaking. Works best in Chrome/Edge.)</small></p>
    </section>

    <!-- Quiz Page -->
    <section id="quiz" class="hidden">
      <h2>Quiz</h2>
      <div id="quizArea"></div>
    </section>
    <!-- Timed Challenge Page -->
    <section id="timed" class="hidden">
      <h2>‚è±Ô∏è Timed Challenge</h2>
      <img src="https://static.wikia.nocookie.net/hellokitty/images/3/3f/Hello_Kitty.png" alt="Hello Kitty" style="max-width:120px; display:block; margin:10px auto;">
      <div id="timedArea"></div>
      <button class="game" onclick="startTimed()">Start 30s Round</button>
    </section>

  </main>

  <script>
  const data = [
    // Greetings
    {gr:"ŒìŒµŒπŒ¨", tr:"Yia", en:"Hi / Hello"},
    {gr:"ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ±", tr:"Kalim√©ra", en:"Good morning"},
    {gr:"ŒöŒ±ŒªŒ∑œÉœÄŒ≠œÅŒ±", tr:"Kalisp√©ra", en:"Good evening"},
    {gr:"ŒöŒ±ŒªŒ∑ŒΩœçœáœÑŒ±", tr:"Kalin√≠khta", en:"Good night"},
    {gr:"ŒïœÖœáŒ±œÅŒπœÉœÑœé", tr:"Efharist√≥", en:"Thank you"},
    {gr:"Œ£Œµ œÄŒ±œÅŒ±Œ∫Œ±Œªœé", tr:"Se parakal√≥", en:"Please"},
    {gr:"Œ£œÖŒ≥Œ≥ŒΩœéŒºŒ∑", tr:"Sign√≥mi", en:"Sorry / Excuse me"},

    // Commonly used
    {gr:"ŒùŒ±Œπ", tr:"Ne", en:"Yes"},
    {gr:"ŒåœáŒπ", tr:"√ìhi", en:"No"},
    {gr:"Œ§Œπ Œ∫Œ¨ŒΩŒµŒπœÇ;", tr:"Ti k√°nis?", en:"How are you?"},
    {gr:"ŒöŒ±ŒªŒ¨", tr:"Kal√°", en:"Good / Well"},
    {gr:"Œ£œÄŒØœÑŒπ", tr:"Sp√≠ti", en:"House / Home"},
    {gr:"ŒùŒµœÅœå", tr:"Ner√≥", en:"Water"},
    {gr:"Œ¶Œ±Œ≥Œ∑œÑœå", tr:"Fagit√≥", en:"Food"},
    {gr:"ŒöŒ±œÜŒ≠œÇ", tr:"Kaf√©s", en:"Coffee"},

    // Everyday Useful Phrases
    {gr:"Œ§Œπ Œ∫Œ¨ŒΩŒµŒπœÇ;", tr:"Ti k√°nis?", en:"How are you?"},
    {gr:"ŒöŒ±ŒªŒ¨, ŒµœÉœç;", tr:"Kal√°, es√≠?", en:"Good, you?"},
    {gr:"ŒìŒµŒπŒ¨ œÉŒøœÖ!", tr:"Yia sou!", en:"Hi! (informal)"},
    {gr:"ŒìŒµŒπŒ¨ œÉŒ±œÇ!", tr:"Yia sas!", en:"Hi! (formal/plural)"},
    {gr:"ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ±!", tr:"Kalim√©ra!", en:"Good morning!"},
    {gr:"Œ§Œπ Œ∫Œ¨ŒΩŒµœÑŒµ;", tr:"Ti k√°nete?", en:"How are you? (formal)"},
    {gr:"ŒëœÄŒ¨ŒΩœÑŒ∑œÉŒ∑: ŒöŒ±ŒªŒ¨, ŒµœÉœç;", tr:"Ap√°ntisi: Kal√°, es√Ω?", en:"Response: Good, and you?"},
    {gr:"ŒúŒπŒ± œáŒ±œÅŒ¨!", tr:"Mia har√°!", en:"Great!"},
    {gr:"ŒåœáŒπ œÄŒøŒªœç Œ∫Œ±ŒªŒ¨‚Ä¶", tr:"√ìhi pol√Ω kal√°‚Ä¶", en:"Not very well‚Ä¶"},
    {gr:"ŒßŒ¨œÅŒ∑Œ∫Œ±!", tr:"H√°rika!", en:"Nice to meet you!"},
    {gr:"ŒöŒ±Œπ ŒµŒ≥œé!", tr:"Kai eg√≥!", en:"Me too!"},
    {gr:"ŒöŒ±Œπ ŒµŒºŒ≠ŒΩŒ±", tr:"Kai emena", en:"Me too / I like that too"},

    // Verbs
    {gr:"ŒµŒØŒºŒ±Œπ", tr:"√≠mai", en:"I am"},
    {gr:"Œ≠œáœâ", tr:"√©ho", en:"I have"},
    {gr:"Œ∫Œ¨ŒΩœâ", tr:"k√°no", en:"I do / I make"},
    {gr:"Œ∏Œ≠Œªœâ", tr:"th√©lo", en:"I want"},
    {gr:"œÄŒ∑Œ≥Œ±ŒØŒΩœâ", tr:"pigh√©no", en:"I go"},
    {gr:"Œ≠œÅœáŒøŒºŒ±Œπ", tr:"√©rhome", en:"I come"},
    {gr:"œÑœÅœéœâ", tr:"tr√≥o", en:"I eat"},
    {gr:"œÄŒØŒΩœâ", tr:"p√≠no", en:"I drink"},
    {gr:"ŒºŒπŒªŒ¨œâ", tr:"mil√°o", en:"I speak"},
    {gr:"Œ∫Œ±œÑŒ±ŒªŒ±Œ≤Œ±ŒØŒΩœâ", tr:"katalav√©no", en:"I understand"},
    {gr:"Œ≤ŒªŒ≠œÄœâ", tr:"vl√©po", en:"I see / I watch"},
    {gr:"ŒæŒ≠œÅœâ", tr:"x√©ro", en:"I know"},
    {gr:"ŒºŒ≠ŒΩœâ", tr:"m√©no", en:"I stay / I live"},

    // Common phrases you say
    {gr:"Œ†ŒµŒπŒΩŒ¨œâ", tr:"Pin√°o", en:"I'm hungry"},
    {gr:"ŒîŒπœàŒ¨œâ", tr:"Dips√°o", en:"I'm thirsty"},
    {gr:"ŒöœÅœÖœéŒΩœâ", tr:"Kry√≥no", en:"I'm cold"},
    {gr:"ŒñŒµœÉœÑŒ±ŒØŒΩŒøŒºŒ±Œπ", tr:"Zest√©nome", en:"I'm hot"},
    {gr:"ŒùœÖœÉœÑŒ¨Œ∂œâ", tr:"Nyst√°zo", en:"I'm sleepy"},
    {gr:"ŒßŒ±ŒØœÅŒøŒºŒ±Œπ", tr:"H√©rome", en:"I'm happy"},
    {gr:"ŒõœÖœÄŒ¨ŒºŒ±Œπ", tr:"Lip√°me", en:"I'm sorry / I feel sorry"},
    {gr:"Œ¶ŒøŒ≤Œ¨ŒºŒ±Œπ", tr:"Fov√°me", en:"I'm afraid"},

    // Actions in daily life
    {gr:"Œ†ŒµœÅœÄŒ±œÑŒ¨œâ", tr:"Perpat√°o", en:"I walk"},
    {gr:"Œ§œÅŒ≠œáœâ", tr:"Tr√©ho", en:"I run"},
    {gr:"ŒîŒøœÖŒªŒµœçœâ", tr:"Doul√©vo", en:"I work"},
    {gr:"ŒîŒπŒ±Œ≤Œ¨Œ∂œâ", tr:"Diav√°zo", en:"I read / I study"},
    {gr:"ŒìœÅŒ¨œÜœâ", tr:"Gr√°fo", en:"I write"},
    {gr:"ŒëŒ∫Œøœçœâ", tr:"Ako√∫o", en:"I listen"},
    {gr:"Œ†Œ±ŒØŒ∂œâ", tr:"P√©zo", en:"I play"}
  ];

  // Populate words grid
  const grid=document.getElementById('wordGrid');
  data.forEach(w=>{
    const card=document.createElement('div'); card.className='card';
    card.innerHTML=`<div class="gr">${w.gr}</div><div class="tr">${w.tr}</div><div class="en">${w.en}</div>`;
    grid.appendChild(card);
  });

  const trToggle=document.getElementById('toggleTr');
  trToggle.addEventListener('change',()=>{
    document.querySelectorAll('.tr').forEach(el=>{el.style.display=trToggle.checked?"":"none"});
  });

  // Flashcards
  let flashIndex=0;
  function renderFlash(){
    const f=document.getElementById('flashArea');
    const item=data[flashIndex];
    f.innerHTML=`<div class='card'><div class='gr'>${item.gr}</div><div class='tr'>${item.tr}</div><div class='hidden en' id='flashAns'>${item.en}</div><button class='game' onclick=\"document.getElementById('flashAns').classList.toggle('hidden')\">Flip Meaning</button></div>`;
  }
  function nextFlash(){flashIndex=(flashIndex+1)%data.length; renderFlash();}
  renderFlash();

  // Say It game (speak practice)
  function renderSay(){
    const area=document.getElementById('sayArea');
    area.innerHTML='';
    data.forEach((w,i)=>{
      const div=document.createElement('div'); div.className='card';
      div.innerHTML=`<div class='gr'>${w.gr}</div><div class='tr'>${w.tr}</div><div class='en'>${w.en}</div>
        <button class='game' onclick='startRec(${i},"el-GR")'>üé§ Say in Greek</button>
        <button class='game' onclick='startRec(${i},"en-US")'>üé§ Say (phonetic)</button>
        <span id='res${i}' class='score'></span>`;
      area.appendChild(div);
    });
  }

  function startRec(i,lang){
    const recog = new(window.SpeechRecognition||window.webkitSpeechRecognition)();
    recog.lang=lang;
    recog.start();
    recog.onresult=(e)=>{
      const said=e.results[0][0].transcript;
      const target = lang==='el-GR'?data[i].gr.toLowerCase():data[i].tr.toLowerCase();
      const heard = said.toLowerCase();
      const score = similarity(normalize(heard,lang), normalize(target,lang));
      document.getElementById('res'+i).textContent = `You said: "${said}" ‚Üí ${Math.round(score*100)}% match`;
    };
    recog.onerror=(e)=>{document.getElementById('res'+i).textContent='Error: '+e.error;};
  }

  function normalize(s,lang){
    s=s.toLowerCase().trim();
    if(lang==='el-GR'){
      const map={'Œ¨':'Œ±','Œ≠':'Œµ','ŒÆ':'Œ∑','ŒØ':'Œπ','œä':'Œπ','Œê':'Œπ','œå':'Œø','œç':'œÖ','Œ∞':'œÖ','œã':'œÖ','œé':'œâ'};
      s=s.replace(/[Œ¨Œ≠ŒÆŒØœäŒêœåœçŒ∞œãœé]/g,m=>map[m]||m);
    }
    return s.replace(/[^a-zŒ±-œâ\s]/g,'').replace(/\s+/g,' ');
  }
  function similarity(a,b){
    const sa=a.replace(/\s+/g,'');
    const sb=b.replace(/\s+/g,'');
    const dist=levenshtein(sa,sb);
    const max=Math.max(sa.length,sb.length)||1;
    return 1-dist/max;
  }
  function levenshtein(a,b){
    const m=a.length,n=b.length; const dp=Array.from({length:m+1},()=>Array(n+1).fill(0));
    for(let i=0;i<=m;i++) dp[i][0]=i; for(let j=0;j<=n;j++) dp[0][j]=j;
    for(let i=1;i<=m;i++){
      for(let j=1;j<=n;j++){
        const cost=a[i-1]===b[j-1]?0:1;
        dp[i][j]=Math.min(dp[i-1][j]+1,dp[i][j-1]+1,dp[i-1][j-1]+cost);
      }
    }
    return dp[m][n];
  }

  renderSay();

  // Quiz
  function startQuiz(){
    const area=document.getElementById('quizArea');
    let qIndex=0;
    function renderQ(){
      const item=data[qIndex];
      const options=[item.en,...data.filter(x=>x.en!==item.en).sort(()=>Math.random()-0.5).slice(0,2).map(x=>x.en)].sort(()=>Math.random()-0.5);
      area.innerHTML=`<div class='card'><div class='gr'>${item.gr}</div><div class='tr'>${item.tr}</div>${options.map(o=>`<button class='game' onclick=\"checkQ('${o}','${item.en}')\">${o}</button>`).join('')}</div>`;
    }
    window.checkQ=(ans,correct)=>{alert(ans===correct?"Correct!":"Wrong, it was "+correct); qIndex=(qIndex+1)%data.length; renderQ();};
    renderQ();
  }
  startQuiz();

  // Nav switching
  function showPage(id){
    document.querySelectorAll('main section').forEach(s=>s.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
    event.target.classList.add('active');
  }
    // ===== Timed Challenge =====
  function startTimed(){
    const area=document.getElementById('timedArea');
    let score=0, time=30;
    area.innerHTML='<div class="score">Score: 0</div><div id="timedQ"></div><div id="timedOpts"></div><div id="timedTimer">Time: 30s</div>';
    const q=document.getElementById('timedQ');
    const opts=document.getElementById('timedOpts');
    const timer=document.getElementById('timedTimer');

    function ask(){
      const item=data[Math.floor(Math.random()*data.length)];
      const wrongs=data.filter(x=>x.en!==item.en);
      const choices=[item,...wrongs.sort(()=>Math.random()-0.5).slice(0,2)];
      choices.sort(()=>Math.random()-0.5);
      q.innerHTML='<div class="gr">'+item.gr+'</div><div class="tr">'+item.tr+'</div>';
      opts.innerHTML='';
      choices.forEach(c=>{
        const b=document.createElement('button'); b.className='game'; b.textContent=c.en;
        b.onclick=()=>{ if(c.en===item.en){score++;} ask(); update(); };
        opts.appendChild(b);
      });
    }
    function update(){
      area.querySelector('.score').textContent='Score: '+score;
    }
    ask();
    const interval=setInterval(()=>{
      time--; timer.textContent='Time: '+time+'s';
      if(time<=0){ clearInterval(interval); q.innerHTML='<b>Time up!</b>'; opts.innerHTML='Final Score: '+score; }
    },1000);
  }

  </script>
  <img class="hk-sticker" alt="Hello Kitty" src="https://static.wikia.nocookie.net/hellokitty/images/5/52/Sanrio_Characters_Hello_Kitty_Image026.png/revision/latest?cb=20250110105831" />
</body>
</html>

